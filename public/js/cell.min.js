Date.prototype.format=function(d){let f={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(d)&&(d=d.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(let h in f)(new RegExp("("+h+")")).test(d)&&(d=d.replace(RegExp.$1,1===RegExp.$1.length?f[h]:("00"+f[h]).substr((""+f[h]).length)));return d};
function Cell(){var d=Cell.prototype,f=function(a){if(13===a.keyCode){a.preventDefault();var b=$(this).parents("form"),c=$(b).find('[name]:not([readonly], [disabled], [type="hidden"], [type="radio"], [type="checkbox"]):visible').index(this);-1!==c&&(c=$(b).find('[name]:not([readonly], [disabled], [type="hidden"], [type="radio"], [type="checkbox"]):visible:eq('+(c+1)+")"),0<c.length?$(c).select():$(this).hasClass("cell-searchbar-display-input")||$(b).submit());a.stopPropagation()}},h=(a,b,c)=>{13===
a.keyCode&&c&&c.call(this,$(b).val())},k=function(){$(this).select()};d.setupFlink=(a,b)=>{b=b||{};$(a).on("click",function(a){if(!a.ctrlKey&&!a.shiftKey){var c=$(this).attr("href");c&&0!==c.length&&(b.initData&&0>c.indexOf("/")?$c.pushHistory(c,b.initData||null):$c.ajax.html(c,{appendTo:b.target||$(this).attr("target"),success:b.initPage}),a.preventDefault())}});return this};d.pushHistory=(a,b)=>{a=a||window.location.pathname;window.history.replaceState({url:location.href},null,location.href);window.history.pushState({url:a},
null,a);"function"===typeof b&&b.call(this,this.querystring())};d.replaceHistory=(a,b)=>{a=a||window.location.pathname;window.history.replaceState({url:a},null,a);"function"===typeof b&&b.call(this,this.querystring())};d.setupForm=(a,b)=>{let c=$(a);c.off("submit").on("submit",function(a){c.addClass("was-validated");let e=c[0];!1===e.checkValidity()?$(e).find(":invalid").first().focus():b&&b.call(e,$(e).serialize());a.preventDefault()});c.find('[name]:not(textarea, [readonly], [type="hidden"], [type="radio"], [type="checkbox"])').on("keypress",
function(a){13===a.keyCode&&a.preventDefault()}).off("keyup",f).on("keyup",f).off("focus",k).on("focus",k);c.find("textarea[autoHeight]").on("input",function(){this.style.height="auto";this.style.height=this.scrollHeight+"px";this.style.overflow="hidden"});c.find(".datepicker").off("keydown");return this};d.setupInput=(a,b=null)=>{$(a).on("keypress",function(a){13===a.keyCode&&a.preventDefault()}).off("keyup",function(a){h(a,this,b)}).on("keyup",function(a){h(a,this,b)}).on("focus",function(){$(this).select()});
return this};d.resetForm=(a,b,c)=>{$(a).each(function(a,d){d.reset();$(d).removeClass("was-validated");!1!==b&&$(d).find("[autofocus]").focus();c&&c.call(d)});return this};d.setAutofocus=a=>{$(a).find("[autofocus]").focus();return this};d.timeSince=a=>{if(a){a=new Date(a.replace(/-/g,"/"));var b=Math.floor((new Date-a)/1E3),c=Math.floor(b/2592E3);if(4<=c)return a.format("yyyy-MM-dd hh:mm");if(1<=c)return c+" \u6708\u524d";c=Math.floor(b/604800);if(1<=c)return c+" \u9031\u524d";c=Math.floor(b/86400);
if(1<=c)return c+" \u5929\u524d";c=Math.floor(b/3600);if(1<=c)return c+" \u5c0f\u6642\u524d";c=Math.floor(b/60);return 1<=c?c+" \u5206\u9418\u524d":"\u525b\u525b"}};d.getTimeSinceMinute=a=>{if(a)return a=new Date(a.replace(/-/g,"/")),Math.floor(Math.floor((new Date-a)/1E3)/60)};d.minuteDiff=(a,b="object")=>{if(a||0===a){if(0===a)return"object"===b?{minute:a}:`<span class="time-minute">${a}</span>`;var c=!1;0>a&&(a*=-1,c=!0);var e=Math.floor(a/60/24);a-=1440*e;var d=Math.floor(a/60);a-=60*d;if("object"===
b)return{negative:c,day:e,hour:d,minute:a};b="";0<e&&(b+=`<span class="time-day">${e}</span>`);0<d&&(b+=`<span class="time-hour">${d}</span>`);0<a&&(b+=`<span class="time-minute">${a}</span>`);return`<span class="${c?"negative":""}">${b}</span>`}};d.timeFormat=(a,b="yyyy-MM-dd hh:mm")=>{if(a)return(new Date(a.replace(/-/g,"/"))).format(b)};d.getIntervalDay=(a=0,b="yyyy-MM-dd",c=Date.now())=>(new Date((new Date(c)).getTime()+864E5*a)).format(b);d.querystring=(a,b)=>{var c=b||location.pathname;b=b||
location.search;c={"./":c.substring(c.lastIndexOf("/")+1)||void 0};b=0===b.indexOf("?")?b.substring(1):b;if(0!==b.length){b=b.split("&");for(let a=0;a<b.length;a++){var e=b[a].split("=");let d=decodeURIComponent(e[0]);e=decodeURIComponent(e[1]);c[d]?(!Array.isArray(c[d])&&(c[d]=Array(c[d])),c[d].push(e)):c[d]=e}}return a?c[a]||void 0:c};d.getPageInfo=()=>{let a=location.pathname.match(/\/([^\/#&?]+)\/([^\/#&?]+)\/[^\/#&?]*$/i);return{modId:a[1],modFunc:a[2],querystring:this.querystring(),hash:location.hash.replace("#",
"")}};d.setUrlParam=(a,b,c)=>{a=a.replace(/&+$/,"");["null",null,void 0,"undefined"].includes(c)&&(c="");let d=new RegExp(`\\b(\\?|&)(${b}=).*?(&|#|$)`);if(0<=a.search(d))return 0<c.length?a.replace(d,`$1$2${c}$3`):0>a.indexOf("&")?a.replace(d,""):a.replace(d,"?"===RegExp.$1?"$1":"$3");if(""===c)return a;a=a.replace(/[?#]$/,"");return a+(0<a.indexOf("?")?"&":"?")+b+"="+c};d.createMinList=(a,b)=>{Array.isArray(a)||(a=[a]);b||(b=document.createElement("div"));let c=document.createElement("div");$(c).appendTo(b).addClass("cell-min-list");
$.each(a,(a,b)=>{a=document.createElement("span");$(a).addClass("cell-min-list-item").html(b).appendTo(c)});return $(b).html()};d.getObjects=(a,b,c)=>{let e=[];for(let g in a)a.hasOwnProperty(g)&&("object"===typeof a[g]?e=e.concat(d.getObjects(a[g],b,c)):g===b&&a[b]===c&&e.push(a));return 1===e.length?e[0]:e};d.nl2br=a=>(a+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2");d.base64Encode=a=>btoa(a).replace(/\+\//g,"-_").replace(/=/g,"");d.base64Decode=a=>{let b=a.length%4;b&&(a+=a.repeat("=",
4-b));return atob(a.replace("-_","+/"))};d.router=a=>{var b=window.location.pathname;let c=$("#cell-rpath").val()||"";if("./"===a||""===a)return b;if(a&&0===a.indexOf("./"))return b+a.substring(1);if(a&&0===a.indexOf("//"))return c+a.substring(2);b=b.replace(c,"");var d=b.indexOf("/");d=b.substring(0,d);return a&&0===a.indexOf("/")?c+d+a:c+b.replace("/"+$c.querystring("./"),"")+"/"+a};d.pregQuote=(a,b=null)=>(a+"").replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(b||"")+"-]","g"),"\\$&");d.stackSticky=
(a="top",b=document,c=".position-sticky:visible, .sticky-top:visible")=>{$(b).find(c).filter(function(b,c){return"auto"===$(c).css(a)}).each(function(d,g){let e=$(g).scrollParent(),f,h;if($(g).parentsUntil(b).length>=$(g).parentsUntil(e).length){d=$(e).find(c);f=d.index(g);if(0===f)return $(g).css(a,0);h=$(d.get(f-1));d.length-1===f&&$(g).attr("scroll-last-sticky",!0)}else d=$(b).find(c),f=d.index(g),h=0===f?e.find("[scroll-last-sticky]").filter(function(a,b){return $(b).scrollParent()[0]===e[0]}):
$(d.get(f-1));$(g).css(a,parseInt(h.css(a))+h.outerHeight()+0)});return this};d.createFieldUser=(a,b)=>{let c=$(document.createElement("div")).addClass("align-self-start"),d=$(document.createElement("div")).addClass("align-self-end");a.name&&$(document.createElement("span")).appendTo(c).html(a.name);a.account&&$(document.createElement("span")).appendTo(c).toggleClass("brackets",!!a.name).html(a.account);a.ip&&$(document.createElement("span")).appendTo(c).toggleClass("square-brackets",!!a.name||!!a.account).html(a.ip);
b&&$(document.createElement("span")).appendTo(d).attr({"data-toggle":"tooltip","data-placement":"bottom",title:b}).html($c.timeSince(b)).tooltip();return $(document.createElement("div")).append(c,d).children()};d.copy2cb=a=>{a.select();return document.execCommand("Copy")};d.banConsole=()=>{$("body").addClass("user-select-none");$(document).on("contextmenu",function(a){return a.preventDefault()});$(document).on("keydown",function(a){if(123===a.keyCode||a.ctrlKey&&a.shiftKey&&73===a.keyCode)return a.preventDefault()})};
d.removeClassPrefix=(a,b)=>{a.className=a.className.split(" ").filter(a=>!a.startsWith(b)).join(" ").trim();return this};d.createElement=(a,b,c,d)=>$(document.createElement(a)).appendTo(b).html(c).addClass(d);d.escape2Html=a=>$(document.createElement("div")).html(a).text();d.html2Escap=a=>$(document.createElement("div")).text(a).html();d.shuffleAarry=(a,b)=>{let c=-1,d=a.length;for(b=b||d;++c<b;){let b=c+Math.floor(Math.random()*(d-c)),e=a[b];a[b]=a[c];a[c]=e}a.length=b;return a};d.formatBytes=(a,
b)=>{var c=["B","KB","MB","GB","TB"];let d=Math.floor((a?Math.log(a):0)/Math.log(1024));d=Math.min(d,c.length-1);c=c[d]?c[d]:c[0];return(a/(1<<10*d)).toFixed(b||2)+" "+c};d.setTitle=(a=!1,b=void 0)=>{!0===a&&$('.cell-mod-title[autoTitle="false"]').removeAttr("autoTitle");b=(b||$('.cell-mod-title[autoTitle!="false"]').text()).replace(/(^\s*)|(\s*$)|\s(?=\s)/g,"");document.title=(b&&`${b} - `)+document.title.split(" - ").pop();return this};d.getCookie=a=>{if(!arguments.length||a){var b=document.cookie?
document.cookie.split("; "):[],c={};for(let a of b){b=a.split("=");let d=b.slice(1).join("=");'"'===d[0]&&(d=d.slice(1,-1));c[decodeURIComponent(b[0])]=decodeURIComponent(d)}return a?c[a]:c}}}
"function"===typeof Vue&&(Cell.Vue=Vue.extend({mounted:function(){this.$nextTick(function(){this.initPage()})},updated:function(){this.initPage(this.$el)},methods:{initPage:function(d=".cell-main-container"){$c.setTitle(!0);$c.setupFlink($(d).find(".fast-link"));$(d).find('[data-toggle="tooltip"]').tooltip();$c.stackSticky()}}}));var $c=new Cell;