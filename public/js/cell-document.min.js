$().ready(function(){$c.document.init()});
$c.document=new function(){function k(a){this.data=a;this.parent=null;this.children=[]}function l(a){var d=l.prototype;this._root=new k(a);d.traverseDF=function(a){(function e(c){a(c);for(let a of c.children)e(a)})(this._root)};d.add=function(a,b){a=new k(a);let c=null;this.traverseDF(function(a){a.data.id===b&&(c=a)});if(c)return c.children.push(a),a.parent=c,a;throw Error("Cannot add node to a non-existent parent.");};d.findParentId=function(a,b){return a.data.tag<b?a.data.id:this.findParentId(a.parent,
b)};d.getNodeLevel=function(a,b=1){return 0!==a.parent.data.id?this.getNodeLevel(a.parent,++b):b}}let h=this,m=(a,d)=>{let c=$(".cell-mod-title").offset().top+$(".cell-mod-title").outerHeight()+$(".cell-footer").outerHeight()+10;a.css("max-height",$(window).outerHeight()-c);d.css("max-height",a.css("max-height"));$(window).on("resize",function(){a.css("max-height",$(this).outerHeight()-c);d.css("max-height",a.css("max-height"))})},n=a=>{let d=new l({id:0,tag:0,content:"\u76ee\u9304"});a=a.find("h1,h2,h3,h4,h5,h6");
var c=d;for(let b=0;b<a.length;b++){let f=Number(a[b].tagName.slice(1)),e=$(a[b]).text().trim();$(a[b]).attr("data-id",b+1);let g=b;c.data&&f<=c.data.tag&&(g=d.findParentId(c,f));c=d.add({id:b+1,tag:f,content:e},g)}return d},p=(a,d)=>{let c=$(document.createElement("nav")).addClass("nav nav-pills flex-column"),b=[0],f=1;a.traverseDF(function(e){if(0===e.data.id&&0===e.data.tag)return c.clone().appendTo(d).addClass(`nav-${e.data.id}`);if(a.getNodeLevel(e)<f)for(var g=f-a.getNodeLevel(e);g--;)b.pop();
f=a.getNodeLevel(e);b[b.length-1]++;g=`toc${b.join("-")}`;$(`[data-id="${e.data.id}"]`).attr("id",g);$(document.createElement("a")).appendTo(`.nav-${e.parent.data.id}`).addClass("nav-link px-2").attr({href:`#${g}`,title:e.data.content}).html(`${b.join(".")}&nbsp;${e.data.content}`);0<e.children.length&&(b.push(0),c.clone().appendTo(`.nav-${e.parent.data.id}`).addClass(`nav-${e.data.id}`))})},q=()=>{let a=$(document.createElement("nav")).appendTo(h.$colToc).addClass("navbar flex-column rounded p-0").attr("id",
"cell-toc"),d=$(".cell-document").appendTo(h.$colDocument).attr({"data-spy":"scroll","data-target":"#cell-toc","data-offset":"0"}).on("activate.bs.scrollspy",function(){var c=a.find(".nav-link.active").last();let b=a.outerHeight();c=c.offset().top-a.offset().top;if(c>=b)return a.scrollTop(a.scrollTop()+b);if(0>c)return a.scrollTop(a.scrollTop()+c)});m(d,a);p(n(d),a)};this.init=()=>{{let a=$(document.createElement("div")).appendTo(document.querySelector(".cell-main-container")||"body").addClass("row flex-row-reverse");
h.$colToc=$(document.createElement("div")).appendTo(a).addClass("col-12 col-lg-4 col-xl-3 px-lg-0");h.$colDocument=$(document.createElement("div")).appendTo(a).addClass("col-12 col-lg-8 col-xl-9 pl-lg-0 pr-lg-1")}q();$(".cell-document").scrollspy({target:"#cell-toc"})}};